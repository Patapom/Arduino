!function(n,e,o){"use strict";var t=o(".main-nav"),r=o(".arduino-nav"),a=o(".cart-submenu"),s=o(".nav-left"),i=o("body"),l="https://store.arduino.cc",c=l;function u(n){c=l,"usa"===n&&(c="https://store.arduino.cc/usa"),o("#buy").find("a").attr("href",c),ArduinoAuthHelper.getToken().then(function(n){p(n),h(n)})}var d=function(){i.removeClass("noscroll"),a.hide()},f=function(n){var e={"X-Requested-With":"XMLHttpRequest"};return n&&(e.Authorization="Bearer "+n),e},p=function(n){jQuery.ajax({url:c+"/cart/api/count?ajax=1",xhrFields:{withCredentials:!0},headers:f(n),success:function(n){var e=n.count,o=jQuery("#cart").find(".badge");o.html(e),o.toggle(0<e),0===e&&window.innerWidth<415&&setTimeout(function(){d()},4e3)},error:function(n){console.error(n)}})},h=function(n){jQuery.ajax({url:c+"/cart/api/minicart?ajax=1",xhrFields:{withCredentials:!0},headers:f(n),success:function(n){var e=n.content;a.find(".dropdown-box").html(e)},error:function(n){console.error("Can't fetch cart data"),console.error(n)}})};u(ArduinoGeo.get());var g=window.location.protocol+"//"+window.location.hostname,m=o("#searchform"),v=o("#searchform-mobile");if(-1!==g.indexOf("store")){var w="/catalogsearch/result/",b=o(".eu-africa");"usa"===ArduinoGeo.get()&&(w="/usa/catalogsearch/result/",b=o(".america-asia")),m.attr("action",w),v.attr("action",w),b.show()}else-1!==g.indexOf("blog")?(m.attr("action",g),v.attr("action",g),o(".search-typing").attr("id","s").attr("name","s")):(m.find(".fill-it").val(g),v.find(".fill-it").val(g));var C=AlgoliaHelper.getAlgoliaSearch();if(o(".logo-link").attr("href",g),o(".logo-link-resellers").attr("href",g),C){r.addClass("search-open"),m.find(".search-typing").css("padding-right","30px"),v.find(".search-typing").css("padding-right","7px"),o(".logo-link").css("left","0"),o(".logo-link-resellers").css("left","0"),m.on("click",function(n){n.target===this&&m.submit()}),v.on("click",function(n){n.target===this&&v.submit()});var k=o(".search-typing"),x=o(".clear-icon");k.on("input",function(){x.toggle(!!this.value)}),x.on("touchstart click",function(n){n.preventDefault(),k.val("").trigger("input"),window.searchInput&&window.searchInput.autocomplete.setVal("")})}o("#search-bar").on("click",function(){r.addClass("search-open")}),o("html").on("click",function(n){o(n.target).hasClass("search-typing")||"search-bar"===n.target.id||C||r.removeClass("search-open"),0===o(n.target).parents(".burger-menu").length&&0===o(n.target).parents(".nav-left").length&&(s.removeClass("open"),s.find(".nav-submenu").removeClass("open")),0===o(n.target).parents(".profile-dropdown").length&&0===o(n.target).is(".profile-dropdown")&&o(".profile-dropdown").find(".nav-submenu").removeClass("open")}),o(window).scroll(function(){C||(r.removeClass("search-open"),100<o(document).scrollTop()?r.addClass("collapsed"):r.removeClass("collapsed"))}),o(".burger-menu").on("click",function(){s.toggleClass("open"),s.hasClass("open")?i.addClass("noscroll"):i.removeClass("noscroll"),s.find(".nav-submenu").removeClass("open"),o(".profile-dropdown").find(".nav-submenu").removeClass("open")}),o(".nav-left .has-submenu").on("click",function(){s.find(".has-submenu").not(this).find(".nav-submenu").removeClass("open"),o(this).find(".nav-submenu").toggleClass("open"),d()}),o(".profile-dropdown").on("click",function(){o(this).find(".nav-submenu").toggleClass("open"),s.removeClass("open"),i.removeClass("noscroll"),d()}),t.find(".cart-dropdown-trigger").on("click",function(){0<o(".cart-submenu:hidden").length?(i.addClass("noscroll"),a.show(),s.removeClass("open"),o(".profile-dropdown").find(".nav-submenu").removeClass("open"),u(ArduinoGeo.get())):d()}),t.find(".cart-dropdown-trigger").on("mouseleave",function(){d()}),o(".cart-dropdown-trigger").find(".cart-close-button").on("click",function(){d()});var y=o(".quotes-submenu");t.find(".quotes-dropdown-trigger").on("click",function(){0<o(".quotes-submenu:hidden").length?(y.show(),s.removeClass("open"),o(".profile-dropdown").find(".nav-submenu").removeClass("open")):y.hide()}),t.find(".quotes-dropdown-trigger").on("mouseleave",function(){y.hide()}),o(".quotes-dropdown-trigger").find(".cart-close-button").on("click",function(){y.hide()}),o(".store-location-button").find(".cart-close-button").on("click",function(){localStorage.setItem("location-aware",!0)})}(window,document,window.jQuery);