ws.namespace("ws.contentbar");ws.contentbar=function($,_,undefined){$(document).ready(function(){$.datepicker.setDefaults($.datepicker.regional[""]);$(".datepicker").datepicker({});function initEventForm($form){$form=$($form);$form.find(".js-allday").on("change",function(){$form.find(".js-time-controls").toggle(!$(this).prop("checked"));$("body").trigger("resize.dialog")}).change();var $timeStart=$form.find(".js-timestart");var $timeEnd=$form.find(".js-timeend");$timeStart.focus(function(){_.defer(function(){$("body").trigger("resize.dialog")})}).timepicker({"scrollbar":true,"change":function(){if(!$timeEnd.timepicker({}).getTime()||$timeEnd.timepicker({}).getTime()<$timeStart.timepicker({}).getTime()){var pairDefault=new Date($timeStart.timepicker({}).getTime().getTime()+60*60*1e3);if(0===pairDefault.getHours())pairDefault=$timeStart.timepicker({}).getTime();$timeEnd.timepicker({}).setTime(pairDefault)}}});$timeEnd.focus(function(){_.defer(function(){$("body").trigger("resize.dialog")})}).timepicker({"scrollbar":true,"change":function(){if(!$timeStart.timepicker({}).getTime()||$timeStart.timepicker({}).getTime()>$timeEnd.timepicker({}).getTime()){var pairDefault=new Date($timeEnd.timepicker({}).getTime().getTime()-60*60*1e3);if(23==pairDefault.getHours())pairDefault=$timeEnd.timepicker({}).getTime();$timeStart.timepicker({}).setTime(pairDefault)}}})}var $formAssignment=$(".ws-stream-form-assignment");initEventForm($(".ws-stream-form-event"));initEventForm($formAssignment);$formAssignment.find(".timepicker").prop("disabled",true).end().find(".datepicker").change(function(){var $this=$(this);$this.closest(".form-group").find(".timepicker").prop("disabled",!$this.val())});$(".ws-stream-form").on("submit",function(){ws.common.trackGA("ContentBar","Submit",$(this).data("add-content-type"))});$("#contentUploadButton").click(function(){$("#WikispacesUploader").plupload("start");ws.common.track("ContentBar","Submit","file");$(this).prop("disabled",true)})});return{"showForm":function(name){var $bar=$(".ws-add-content-bar");$(".ws-stream-form").hide();if($bar.is(".ws-add-content-showing")&&$bar.find(".ws-add-content-"+name+".ws-active").length){$bar.removeClass("ws-add-content-showing");$("body").trigger("resize.dialog");return $()}$bar.addClass("ws-add-content-showing");$bar.find(".ws-add-content").removeClass("ws-active");$bar.find(".ws-add-content-"+name).addClass("ws-active");var $form=$(".ws-stream-form-"+name).show();$("body").trigger("resize.dialog");return $form},"chooseForm":function(name){ws.contentbar.showForm(name).find("input:visible:first").focus()}}}(jQuery,_);
//# sourceMappingURL=contentbar.min.js.map